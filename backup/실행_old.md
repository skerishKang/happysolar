# HappySolar 문서 생성 시스템 실행 방법 (2024-06 최신)

## 사전 요구사항

### 1. 환경 설정
- Node.js 18+ 버전이 설치되어 있어야 합니다.
- PostgreSQL 데이터베이스가 설정되어 있어야 합니다.
- OpenAI API 키가 필요합니다.

### 2. 환경 변수 설정
다음 환경 변수들을 설정해주세요:

```bash
# OpenAI API 키
OPENAI_API_KEY=your-openai-api-key-here

# 데이터베이스 연결
DATABASE_URL=your-postgresql-connection-string

# 세션 비밀키
SESSION_SECRET=your-session-secret
```

## 폴더 구조 요약

- `/client`: 프론트엔드(React)
- `/server`: 백엔드(Node.js/Express)
- `/shared`: 타입/스키마 공유
- `/attached_assets`: 첨부파일, 회사문서, 이미지 등
- `/uploads`: 업로드 파일 저장소
- `/logs`: 서버/클라이언트 로그 저장(자동 생성)
- 기타: 설정 및 설명 파일

## 설치 및 실행

### 1. 의존성 설치
```bash
npm install
```

### 2. 데이터베이스 설정
```bash
npm run db:push
```

### 3. 개발 서버 실행
```bash
npm run dev
```

### 4. 애플리케이션 접속
브라우저에서 다음 주소로 접속합니다:
```
http://0.0.0.0:5000
```

## 프로덕션 배포

### 1. 빌드
```bash
npm run build
```

### 2. 프로덕션 실행
```bash
npm start
```

## 사용 방법

### 1. 메인 대시보드
- 다양한 문서 생성 옵션, 월간 통계, 최근 문서, 회사 정보 등 확인

### 2. 문서 생성
- 세금계산서, 거래명세서, 계약서, 프레젠테이션, 제안서, 회의록, 이메일 등 생성 가능

### 3. 문서 다운로드 및 업로드
- 생성된 문서는 PDF로 다운로드 가능
- 업로드 파일은 `/uploads` 폴더에 저장됨

## 주요 스크립트 명령어

```bash
# 개발 서버 실행
npm run dev

# 프로덕션 빌드
npm run build

# 프로덕션 서버 실행
npm start

# TypeScript 타입 체크
npm run check

# 데이터베이스 스키마 푸시
npm run db:push
```

## 포트 정보
- **개발/프로덕션**: 5000번 포트
- **접속 주소**: http://0.0.0.0:5000

## 문제 해결

### 일반적인 오류들

1. **tsx: not found**
   - Node.js 버전이 18+ 인지 확인
   - `npm install` 재실행

2. **데이터베이스 연결 오류**
   - DATABASE_URL 환경 변수 확인
   - PostgreSQL 서버 실행 상태 확인

3. **OpenAI API 오류**
   - OPENAI_API_KEY 환경 변수 확인
   - API 키 유효성 및 잔액 확인

### 로그 확인
- 서버/클라이언트 로그는 `/logs` 폴더에 저장됩니다.
- 서버 콘솔에서도 API 요청과 응답 로그를 확인할 수 있습니다.

## 실제 PDF/PPTX 생성 및 다운로드 테스트 방법 (2024-06 추가)

1. 개발 서버를 실행한 후(위 단계 참고), 브라우저에서 http://0.0.0.0:5000 접속
2. 대시보드 또는 문서 생성 메뉴에서 원하는 문서 유형(PDF, PPTX 등) 선택
3. 입력값을 다양하게(필수/비필수, 빈 값 등) 넣고 문서 자동 생성 실행
4. 생성된 문서가 정상적으로 다운로드되는지 확인
5. 다운로드한 파일을 열어 내용이 올바른지, 레이아웃이 깨지지 않는지 확인
6. 에러 발생 시 `/logs` 폴더 및 브라우저 콘솔 로그 확인

### 테스트 체크리스트
- [ ] PDF/PPTX 생성 버튼 클릭 시 파일이 정상적으로 생성되는가?
- [ ] 다운로드한 파일이 정상적으로 열리는가?
- [ ] 입력값이 비어 있어도 AI가 자동으로 채워주는가?
- [ ] 내용, 디자인, 표/차트 등 데이터가 올바르게 반영되는가?
- [ ] 에러 발생 시 로그에 기록되는가?
- [ ] 여러 번 반복 테스트 시 일관성 있게 동작하는가?
